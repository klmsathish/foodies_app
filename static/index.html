<html>
    <head>
        <title>Documnet</title>
    </head>
    <body>
        <h1>Registration</h1>
        <form id='reg-form'>
            <input type="text" autocomplete="off" id="username" placeholder="Username" />
            <input type="password" id="password" autocomplete="off" placeholder="Password"/>
            <input type="submit" value="submit Form"/>

        </form>
        <script>
            const form=document.getElementById('reg-form')
            form.addEventListener('submit',registerUser)
            // 1. send data as json
            // 2.send data as urlencoded

            async function registerUser(event){
                event.preventDefault()
                const username=document.getElementById('username').value
                const password=document.getElementById('password').value
                const result=await fetch('/api/register',{
                    method:'POST',
                    headers:{
                        'Content-Type':'application/json'
                    },
                    body:JSON.stringify({
                        username,
                        password

                    })
                }).then((res)=>res.json())
                if(result.status === "ok"){
                    alert('Succcess')

                }
                else{
                    alert(result.error)

                }
               

                


            }

        </script>
    </body>
</html>